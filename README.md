# BLS

## Описание

## API
Адрес: [``` http://167.99.128.56/ ```](http://167.99.128.56/)

Код ошибки для всех методов | Название
---|---
0 | Успешно
1 | Ошибка сервера
2 | Неправильный запрос
3 | Не все поля заполнены
4 | Неправильный тип данных у поля

Общий вид запроса: ``` {'method': ..., ...} ```

Общий вид ответа: ``` {'error': ..., ...} ```

### 1. Регистрация ``` profile.reg ```
Атрибут запроса | Название | Обязательный? | Тип данных | Описание
---|---|---|---|---
Логин | ``` login ``` | + | str | От 3 до 10 символов включительно<br>Только латинские буквы и цифры<br>Использование букв обязательно<br>Регистр не учитывается
Пароль | ``` pass ``` | + | str | От 6 до 40 символов включительно<br>Латинские буквы, цифры и спецсимволы (``` !@#$%^&*()-_+=;:,./?\|`~[]{} ```)<br>Использование букв и цифр обязательно<br>Регистр учитывается
Почта | ``` mail ``` | + | str | Стандартная почта
Имя | ``` name ``` | - | str | Только буквы<br>Регистр не важен
Фамилия | ``` surname ``` | - | str | Только буквы<br>Регистр не важен

Атрибут ответа | Название | Описание
---|---|---
ID | ``` id ``` | ID нового пользователя
Токен | ``` token ``` | Токен текущей сессии

Код ошибки | Название
---|---
5 | Логин уже зарегистрирован
6 | Недопустимый логин
7 | Почта уже зарегистрирована
8 | Недопустимый пароль
9 | Недопустимая почта
10 | Недопустимое имя
11 | Недопустимая фамилия

<br>

### 2. Авторизация ``` profile.auth ```
Атрибут запроса | Название | Обязательный? | Тип данных
---|---|---|---
Логин | ``` login ``` | + | str
Пароль | ``` pass ``` | + | str

Атрибут ответа | Название | Описание
---|---|---
ID | ``` id ``` | ID пользователя
Токен | ``` token ``` | Токен текущей сессии

Код ошибки | Название
---|---
5 | Неправильный логин
6 | Неправильный пароль

<br>

### 3. Настройки ``` profile.edit ```
Атрибут запроса | Название | Обязательный? | Тип данных | Описание
---|---|---|---|---
Токен | ``` token ``` | + | str | Токен сессии
Имя | ``` name ``` | - | str | Только буквы<br>Регистр не важен
Фамилия | ``` surname ``` | - | str | Только буквы<br>Регистр не важен
Описание | ``` description ``` | - | str | 
Фото | ``` photo ``` | - | str | Base64

Код ошибки | Название
---|---
5 | Неправильный токен
6 | Недопустимое имя
7 | Недопустимая фамилия
8 | Ошибка загрузки фотографии

<br>

### 4. Закрытие сессии ``` profile.exit ```
Атрибут запроса | Название | Обязательный? | Тип данных | Описание
---|---|---|---|---
Токен | ``` token ``` | + | str | Токен сессии

Код ошибки | Название
---|---
5 | Неправильный токен

<br>

## Структура базы данных
MongoDB

### ``` users ```
```
{
	'id': int,
	'login': str,
	'password': str,
	'mail': str,
	'name': str,
	'surname': str,
	'description': str,
	'admin': int,
	'rating': int,
	'tokens': int,
	'ladders': [{
		'id': int,
		'step': int,
		'new': [
			int,
		],
	}],
	'transactions': [{
		'type': int,
		'count': int,
		'user': int,
		'out': int,
		'time': float,
	}],
}
```

### ``` ladders ```
```
{
	'id': int,
	'name': str,
	'description': str,
	'tags': [
		str,
	],
	'steps': [{
		'name': str,
		'cont': str,
		'options': [
			str,
		],
		'answers': [
			int,
		],
		'theory': str,
		'user': int,
	}],
	'view': [
		int,
	],
	'like': [
		int,
	],
	'dislike': [
		int,
	],
	'comment': [
		?
	],
	'priority': int,
	'time': float,
	'user': int,
	'status': int,
}
```

### ``` tokens ```
```
{
	'id': int,
	'token': str,
	'time': float,
}
```

### ``` actions ```

## Коды

### Уровень доступа ``` admin ```
Код | Значение
---|---
0 | Удалён
1 | Заблокирован
2 | Не авторизован
3 | Обычный
4 | Продвинутый
5 | Корректор
6 | Модератор
7 | Администратор
8 | Владелец

### Направление транзакции ``` out ```
Код | Значение
---|---
0 | Входящая
1 | Исходящая

### Тип транзакции ``` type ```
Код | Значение
---|---
0 | Неизвестная транзакция
1 | Отправка токенов
2 | За регистрацию
3 | За обучение

### Статус курса ``` status ```
Код | Значение
---|---
0 | Скрыто
1 | Опубликовано