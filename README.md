# BLS

## Описание

## API
Адрес: [``` http://167.99.128.56/ ```](http://167.99.128.56/)

Код ответа для всех методов | Название
---|---
0 | Успешно
1 | Ошибка сервера
2 | Неправильный запрос
3 | Не все поля заполнены
4 | Неправильный тип данных у поля

Общий вид запроса: ``` {'method': ..., ...} ```

Общий вид ответа: ``` {'error': ..., ...} ```

### 1. Регистрация ``` profile.reg ```
Атрибут запроса | Название | Обязательный? | Тип данных | Описание
---|---|---|---|---
Логин | ``` login ``` | + | str | От 3 до 10 символов включительно<br>Только латинские буквы и цифры<br>Использование букв обязательно<br>Регистр не учитывается
Пароль | ``` pass ``` | + | str | От 6 до 40 символов включительно<br>Латинские буквы, цифры и спецсимволы (``` !@#$%^&*()-_+=;:,./?\|`~[]{} ```)<br>Использование букв и цифр обязательно<br>Регистр учитывается
Почта | ``` mail ``` | + | str | Стандартная почта
Имя | ``` name ``` | - | str | Только буквы<br>Регистр не важен
Фамилия | ``` surname ``` | - | str | Только буквы<br>Регистр не важен

Атрибут ответа | Название | Описание
---|---|---
ID | ``` id ``` | ID нового пользователя
Токен | ``` token ``` | Токен текущей сессии

Код ошибки | Название
---|---
5 | Логин уже зарегистрирован
6 | Недопустимый логин
7 | Почта уже зарегистрирована
8 | Недопустимый пароль
9 | Недопустимая почта
10 | Недопустимое имя
11 | Недопустимая фамилия

<br>

### 2. Авторизация ``` profile.auth ```
Атрибут запроса | Название | Обязательный? | Тип данных
---|---|---|---
Логин | ``` login ``` | + | str
Пароль | ``` pass ``` | + | str

Атрибут ответа | Название | Описание
---|---|---
ID | ``` id ``` | ID пользователя
Токен | ``` token ``` | Токен текущей сессии

Код ошибки | Название
---|---
5 | Неправильный логин
6 | Неправильный пароль

<br>

### 3. Настройки ``` profile.edit ```
Атрибут запроса | Название | Детали | Обязательный? | Тип данных | Описание
---|---|---|---|---
Токен | ``` token ``` | + | str | Токен сессии
Имя | ``` name ``` | - | str | Только буквы<br>Регистр не важен
Фамилия | ``` surname ``` | - | str | Только буквы<br>Регистр не важен
Описание | ``` description ``` | - | str | 
Фото | ``` photo ``` | - | str | Base64

Код ошибки | Название
---|---
5 | Неправильный токен
6 | Недопустимое имя
7 | Недопустимая фамилия
8 | Ошибка загрузки фотографии

<br>

### 4. Закрытие сессии ``` profile.exit ```
Атрибут запроса | Название | Детали | Обязательный? | Тип данных | Описание
---|---|---|---|---
Токен | ``` token ``` | + | str | Токен сессии

Код ошибки | Название
---|---
5 | Неправильный токен

<br>

## Структура базы данных
MongoDB

### ``` users ```
``` {<br>\t'id': int,<br>\t'login': str,<br>\t'password': str,<br>\t'mail': str,<br>\t'name': str,<br>\t'surname': str,<br>\t'description': str,<br>\t'admin': int,<br>\t'rating': int,<br>\t'tokens': int,<br>\t'ladders': [{<br>\t\t'id': int,<br>\t\t'step': int,<br>\t\t'new': [<br>\t\t\tint,<br>\t\t],<br>\t\t]},<br>\t'transactions': [{<br>\t\t'type': int,<br>\t\t'count': int,<br>\t\t'user': int,<br>\t\t'out': int,<br>\t\t'time': float,<br>\t}],<br>} ```

### ``` ladders ```
``` {<br>\t'id': int,<br>\t'name': str,<br>\t'description': str,<br>\t'tags': [<br>\t\tstr,<br>\t],<br>\t'steps': [{<br>\t\t'name': str,<br>\t\t'cont': str,<br>\t\t'options': [<br>\t\t\tstr,<br>\t\t],<br>\t\t'answers': [<br>\t\t\tint,<br>\t\t],<br>\t\t'theory': str,<br>\t\t'user': int,<br>\t}],<br>\t'view': [<br>\t\tint,<br>\t],<br>\t'like': [<br>\t\tint,<br>\t],<br>\t'dislike': [<br>\t\tint,<br>\t],<br>\t'comment': [<br>\t\t?<br>\t],<br>\t'priority': int,<br>\t'time': float,<br>\t'user': int,<br>\t'status': int,<br>} ```

### ``` tokens ```
``` {<br>\t'id': int,<br>\t'token': str,<br>\t'time': float,<br>} ```

### ``` actions ```

## Коды

### Администратор ``` admin ```
Код | Значение
---|---
0 | Удалён
1 | Заблокирован
2 | Не авторизован
3 | Обычный
4 | Продвинутый
5 | Корректор
6 | Модератор
7 | Администратор
8 | Владелец

### Направление транзакции ``` out ```
Код | Значение
---|---
0 | Входящая
1 | Исходящая

### Тип транзакции ``` type ```
Код | Значение
---|---
0 | Неизвестная транзакция
1 | Отправка токенов
2 | За регистрацию
3 | За обучение

### Статус курса ``` status ```
Код | Значение
---|---
0 | Неизвестный статус
1 | Черновик
2 | На редакции
3 | Опубликовано
4 | Скрыто